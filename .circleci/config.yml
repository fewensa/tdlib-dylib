version: 2.1


jobs:
  build:
    working_directory: ~/td/build
    docker:
      - image: alpine:3.9
    steps:
      - checkout:
          path: ~/td
      - run: apk update
      - run: apk add gcc g++ cmake make zlib-dev openssl git
      - run: pwd
      - run: ls -l && ls ../ -l
      - run: cmake -DCMAKE_BUILD_TYPE=Release ..
      - run: cmake --build .
      - store_artifacts:
          path: ~/td/build

workflows:
  version: 2
  dylib-workflow:
    jobs:
      - build:
          context: GH
          filters:
            branches:
              only: build


